import{_ as i,c as a,o as e,ae as l}from"./chunks/framework.FWzobDMP.js";const c=JSON.parse('{"title":"Utils","description":"","frontmatter":{},"headers":[],"relativePath":"ru/guide/utils.md","filePath":"ru/guide/utils.md"}'),n={name:"ru/guide/utils.md"};function t(p,s,h,r,k,d){return e(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="utils" tabindex="-1">Utils <a class="header-anchor" href="#utils" aria-label="Permalink to &quot;Utils&quot;">​</a></h1><p>Базовые утилиты</p><h2 id="resolveresource" tabindex="-1">resolveResource <a class="header-anchor" href="#resolveresource" aria-label="Permalink to &quot;resolveResource&quot;">​</a></h2><p>Позволяет получить информацию о ресурсе внутри ВКонтакте. Зачастую возникает задача получить идентификатор ресурса из ссылки/упоминания или числа. Для того что бы не писать эту логику самостоятельно можно воспользоваться <code>resolveResource</code>. Поддерживается следующие приведённые примеры:</p><p>Ссылка</p><ul><li><a href="https://vk.ru/id1" target="_blank" rel="noreferrer">https://vk.ru/id1</a> — <code>{ id: 1, type: &#39;user&#39; }</code></li><li><a href="https://vk.ru/durov" target="_blank" rel="noreferrer">https://vk.ru/durov</a> — <code>{ id: 1, type: &#39;user&#39; }</code></li><li><a href="https://vk.ru/wall1_2442097" target="_blank" rel="noreferrer">https://vk.ru/wall1_2442097</a> — <code>{ id: 2442097, ownerId: 1, type: &#39;wall&#39; }</code></li><li><a href="https://vk.ru/durov?w=wall1_2442097" target="_blank" rel="noreferrer">https://vk.ru/durov?w=wall1_2442097</a> — <code>{ id: 2442097, ownerId: 1, type: &#39;wall&#39; }</code></li><li><a href="https://vk.ru/club1" target="_blank" rel="noreferrer">https://vk.ru/club1</a> — <code>{ id: 1, type: &#39;group&#39; }</code></li><li><a href="https://vk.ru/app1" target="_blank" rel="noreferrer">https://vk.ru/app1</a> — <code>{ id: 1, type: &#39;application&#39; }</code></li></ul><p>Упоминание</p><ul><li>[id1|Durov] — <code>{ id: 1, type: &#39;user&#39; }</code></li><li>[club1|VKontakte API] — <code>{ id: 1, type: &#39;group&#39; }</code></li></ul><p>Идентификатор</p><ul><li>1 — <code>{ id: 1, type: &#39;user&#39; }</code></li><li>-1 — <code>{ id: 1, type: &#39;group&#39; }</code></li></ul><p>Slug</p><ul><li>id1 — <code>{ id: 1, type: &#39;user&#39; }</code></li><li>durov — <code>{ id: 1, type: &#39;user&#39; }</code></li></ul><p>Ресурсы делятся на два типа:</p><p><a href="https://negezor.github.io/vk-io/references/vk-io/interfaces/IResolvedTargetResource.html" target="_blank" rel="noreferrer">Целевые</a> — это единичные сущности.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IResolvedTargetResource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;user&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;group&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;application&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;albums&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;videos&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;audios&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a href="https://negezor.github.io/vk-io/references/vk-io/interfaces/IResolvedOwnerResource.html" target="_blank" rel="noreferrer">С владельцем</a> — это сущности с владельцем, в основном прикрепления.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IResolvedOwnerResource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    ownerId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;photo&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;audio&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;video&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;doc&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;wall&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;topic&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;album&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="использование-resolveresource" tabindex="-1">Использование resolveResource <a class="header-anchor" href="#использование-resolveresource" aria-label="Permalink to &quot;Использование resolveResource&quot;">​</a></h3><p><a href="https://negezor.github.io/vk-io/references/vk-io/interfaces/IResolveResourceOptions.html" target="_blank" rel="noreferrer">Опции функции</a></p><div class="warning custom-block"><p class="custom-block-title">Внимание</p><p>Вы вполне можете не передавать класс API, однако если будет встречено короткое имя (<a href="https://en.wikipedia.org/wiki/Clean_URL#Slug" target="_blank" rel="noreferrer">slug</a>) по типу <code>durov</code> — вы получите ошибку, так как он нужен для вызова метода <a href="https://dev.vk.ru/method/utils.resolveScreenName" target="_blank" rel="noreferrer">utils.resolveScreenName</a>.</p></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { API, resolveResource } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vk-io&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> api</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> API</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    token: process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TOKEN</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> resource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> resolveResource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    api,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Или</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // api: vk.api,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Ресурс который нужно разобрать</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    resource: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://vk.ru/id1&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(resource); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// { id: 1, type: &#39;user&#39; }</span></span></code></pre></div>`,21)])])}const g=i(n,[["render",t]]);export{c as __pageData,g as default};
